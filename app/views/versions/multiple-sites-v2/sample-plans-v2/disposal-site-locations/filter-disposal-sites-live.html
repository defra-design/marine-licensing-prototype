{% extends "../../layouts/sample-plans.html" %}

{% from "govuk/components/input/macro.njk" import govukInput %}
{% from "govuk/components/radios/macro.njk" import govukRadios %}

{% block head %}
  {{ super() }}
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/accessible-autocomplete@3.0.1/dist/accessible-autocomplete.min.css" />
  <style>
  @media (min-width: 48.0625em) {
    /* Narrow the filter column by 115px (from default ~320px to ~205px) */
    .moj-filter-layout.sample-filter .moj-filter-layout__filter {
      width: 205px;
      max-width: 205px;
      flex: 0 0 205px;
    }
  }
  </style>
{% endblock %}

{% block bodyEnd %}
  {{ super() }}
  <script src="https://cdn.jsdelivr.net/npm/@ministryofjustice/frontend/moj-frontend.min.js"></script>
  <script src="/public/javascripts/disposal-sites-data.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/accessible-autocomplete@3.0.1/dist/accessible-autocomplete.min.js"></script>
  <script src="/public/javascripts/sample-plans-v2-disposal-site-filter-live.js"></script>
{% endblock %}

{% block beforeContent %}
    {% include "../../includes/phase-banner.html" %}
    {% if data['user_type'] === 'organisation' %}
        {% include "../../includes/organisation-switcher.html" %}
    {% endif %}
    <a class="govuk-back-link" href="javascript:history.back()">Back</a>
{% endblock %}

{% set pageHeadingTextHTML %}
Find the existing disposal site
{% endset %}

{% block pageTitle %}
    {{ pageHeadingTextHTML }} - {{ data['headerNameExemption'] }}
{% endblock %}

{% block content %}

<div class="govuk-grid-row">
  <div class="govuk-grid-column-full">

    <span class="govuk-caption-l">{{ data['sample-plan-project-name-text-input'] }}</span>
    <h1 class="govuk-heading-l">{{ pageHeadingTextHTML }}</h1>

    <div class="moj-filter-layout sample-filter">
      <div class="moj-filter-layout__filter">
        <div class="moj-filter" data-module="moj-filter">
          <div class="moj-filter__header">
            <div class="moj-filter__header-title"><h2 class="govuk-heading-m">Filter</h2></div>
            <div class="moj-filter__header-action"></div>
          </div>
          <div class="moj-filter__content">
            <div class="moj-filter__selected" aria-live="polite">
              <div class="moj-filter__selected-heading">
                <div class="moj-filter__heading-title"><h2 class="govuk-heading-s">Selected filters</h2></div>
                <div class="moj-filter__heading-action"><p><a class="govuk-link govuk-link--no-visited-state" href="#" id="top-clear-filters-link">Clear filters</a></p></div>
              </div>
              <div id="selected-filters-container"></div>
            </div>
            <div class="moj-filter__options">
              <form id="filter-form" onsubmit="return false;">

                {{ govukInput({
                  label: {
                    text: "Disposal site code",
                    classes: "govuk-label--s"
                  },
                  id: "filter-code",
                  name: "filter-code",
                  classes: "govuk-!-width-full"
                }) }}

                {{ govukInput({
                  label: {
                    text: "Name of disposal site",
                    classes: "govuk-label--s"
                  },
                  id: "filter-name",
                  name: "filter-name",
                  classes: "govuk-!-width-full"
                }) }}

                {{ govukRadios({
                  classes: "govuk-radios--small",
                  fieldset: {
                    legend: {
                      text: "Site location",
                      classes: "govuk-fieldset__legend--s"
                    }
                  },
                  items: [
                    { value: "Any", text: "Any", checked: true },
                    { value: "England", text: "England" },
                    { value: "Isle of Man", text: "Isle of Man" },
                    { value: "Jersey", text: "Jersey" },
                    { value: "Northern Ireland", text: "Northern Ireland" }
                  ],
                  name: "filter-location"
                }) }}

                <div class="govuk-form-group">
                  <label class="govuk-label govuk-label--s" for="filter-marine-area-autocomplete">Marine area</label>
                  <div class="govuk-hint">This includes sea, river, estuary and coastal waters</div>
                  <div class="govuk-!-width-full" id="filter-marine-area-autocomplete-container"></div>
                </div>

                

              </form>
            </div>
          </div>
        </div>
      </div>

      <div class="moj-filter-layout__content">
        <div class="moj-action-bar">
          <div class="moj-action-bar__filter"></div>
        </div>

        <p class="govuk-body" id="results-count">We found <strong id="total-results">0</strong> disposal sites.</p>
        <p class="govuk-body govuk-!-margin-top-4" id="results-summary"></p>

        <div class="govuk-table-overflow">
          <table class="govuk-table" id="filter-disposal-sites-table" data-module="moj-sortable-table">
            <caption class="govuk-table__caption govuk-visually-hidden">Disposal site search results</caption>
            <thead class="govuk-table__head">
              <tr class="govuk-table__row">
                <th scope="col" class="govuk-table__header" aria-sort="ascending">Site code</th>
                <th scope="col" class="govuk-table__header" aria-sort="none">Site name</th>
                <th scope="col" class="govuk-table__header" aria-sort="none">Site location</th>
                <th scope="col" class="govuk-table__header" aria-sort="none">Marine area</th>
                <th scope="col" class="govuk-table__header" aria-sort="none">Status</th>
              </tr>
            </thead>
            <tbody class="govuk-table__body" id="filter-disposal-sites-table-body"></tbody>
          </table>
        </div>

        <nav class="govuk-pagination" aria-label="Pagination" id="filter-pagination-nav"></nav>

      </div>
    </div>

    <p class="govuk-body govuk-!-margin-top-6">
      <a class="govuk-link govuk-link--no-visited-state" href="find-existing-disposal-site?disposal-site-code=&disposal-site-name=&disposal-site-location=&marine-area=&disposal-site-status=">Search for a different disposal site</a>
    </p>

    <div class="govuk-button-group govuk-!-margin-top-4">
      <a class="govuk-link govuk-link--no-visited-state" href="../sample-plan-start-page">Cancel and return to sample plan start page</a>
    </div>

  </div>
</div>

{% endblock %}


