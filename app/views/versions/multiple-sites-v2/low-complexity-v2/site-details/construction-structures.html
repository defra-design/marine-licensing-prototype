{% extends "../../layouts/low-complexity.html" %}

{% from "govuk/components/checkboxes/macro.njk" import govukCheckboxes %}
{% from "govuk/components/button/macro.njk" import govukButton %}
{% from "govuk/components/error-summary/macro.njk" import govukErrorSummary %}
{% from "govuk/components/textarea/macro.njk" import govukTextarea %}

{% block beforeContent %}
    {% include "../../includes/phase-banner.html" %}
    {% if data['organisation-name'] %}
        {% include "../../includes/organisation-switcher.html" %}
    {% endif %}
    <a class="govuk-back-link" href="javascript:history.back()">Back</a>
{% endblock %}

<!-- Setting the big main heading at the top of the page -->
{% set pageHeadingTextHTML %}
{% if data['low-complexity-type-of-works'] == 'construction-new' %}
What are you constructing?
{% elif data['low-complexity-type-of-works'] == 'maintenance-existing' %}
What are you maintaining?
{% elif data['low-complexity-type-of-works'] == 'alteration-improvement' %}
What are you altering or improving?
{% else %}
What type of structure will you be working on?
{% endif %}
{% endset %}

<!-- Text that show in the browser tab. Does NOT need changing -->
{% block pageTitle %}
{% if data['low-complexity-construction-structures-errorthispage'] == "true" %}
Error:
{% endif %}

{{ pageHeadingTextHTML }} - {{ data['headerNameExemption'] }}
{% endblock %}

{% set otherStructuresTextarea %}
{{ govukTextarea({
    id: "low-complexity-construction-structures-other-details",
    name: "low-complexity-construction-structures-other-details",
    value: data['low-complexity-construction-structures-other-details'],
    label: {
        text: "Provide details"
    },
    errorMessage: {
        text: "Enter details of the other structures"
    } if data['low-complexity-construction-structures-errortypetwo'] == "true"
}) }}
{% endset %}

{% block content %}
<style>
    .govuk-checkboxes__divider {
        font-weight: 700;
        max-width: none !important;
        width: 100% !important;
        display: block !important;
        text-align: left !important;
        font-size: 1.125rem !important;
        line-height: 1.3125 !important;
        margin-top: 40px;
        margin-bottom: 15px;
    }
    .govuk-checkboxes__divider:first-of-type {
        margin-top: 0;
    }
</style>

<div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
        
        <form action="construction-structures-router" method="post" novalidate>
            
            <!-- Error summary -->
            {% if data['low-complexity-construction-structures-errorthispage'] == "true" %}
                {{ govukErrorSummary({
                    titleText: "There is a problem",
                    errorList: [
                        {
                            text: data['low-complexity-construction-structures-error'] if data['low-complexity-construction-structures-errortypeone'] == "true" else "Enter details of the other structures",
                            href: "#low-complexity-construction-structures" if data['low-complexity-construction-structures-errortypeone'] == "true" else "#low-complexity-construction-structures-other-details"
                        }
                    ]
                }) }}
            {% endif %}

            {{ govukCheckboxes({
                name: "low-complexity-construction-structures",
                fieldset: {
                    legend: {
                        html: '<span class="govuk-caption-l">' + data['low-complexity-project-name-text-input'] + '<span class="govuk-!-display-block">Site 1</span></span>' + pageHeadingTextHTML,
                        isPageHeading: true,
                        classes: "govuk-fieldset__legend--l govuk-!-margin-bottom-6"
                    }
                },
                hint: {
                    text: "Select all that apply"
                },
                items: [
                    {
                        divider: "Aquaculture"
                    },
                    {
                        value: "aquaculture-trestles",
                        text: "Aquaculture trestles or fixed walkways"
                    },
                    {
                        value: "aquaculture-piled-structures",
                        text: "Piled or fixed aquaculture structures"
                    },
                    {
                        divider: "Coastal defence works"
                    },
                    {
                        value: "hard-coastal-defence",
                        text: "Hard coastal defence structures such as rock armour or concrete units"
                    },
                    {
                        value: "tidal-flood-defence",
                        text: "Tidal flood defence structures (e.g., flood barriers, tidal gates, sluices)"
                    },
                    {
                        divider: "Coastal or shore-based structures"
                    },
                    {
                        value: "breakwater-mole-harbour",
                        text: "Breakwater, mole or harbour protection structure"
                    },
                    {
                        value: "bridge-supports",
                        text: "Bridge or bridge supports in tidal waters"
                    },
                    {
                        value: "causeway-embankment",
                        text: "Causeway, embankment or coastal access ramp"
                    },
                    {
                        value: "groyne",
                        text: "Groyne"
                    },
                    {
                        value: "jetty-pier-quay",
                        text: "Jetty, pier or quay"
                    },
                    {
                        value: "revetment",
                        text: "Revetment (sloped coastal protection)"
                    },
                    {
                        value: "sea-wall-coastal-wall",
                        text: "Sea wall or coastal wall"
                    },
                    {
                        value: "slipway-boat-ramp",
                        text: "Slipway or boat ramp"
                    },
                    {
                        divider: "Floating or part-floating structures (fixed in place)"
                    },
                    {
                        value: "floating-breakwaters",
                        text: "Floating breakwaters or wave attenuators"
                    },
                    {
                        value: "pontoons-walkways",
                        text: "Pontoons or floating walkways"
                    },
                    {
                        divider: "Marine energy structures"
                    },
                    {
                        value: "offshore-wind-foundations",
                        text: "Fixed offshore wind foundations"
                    },
                    {
                        value: "tidal-energy-devices",
                        text: "Tidal energy devices or foundations"
                    },
                    {
                        value: "wave-energy-foundations",
                        text: "Wave energy device foundations"
                    },
                    {
                        divider: "Marine utilities and infrastructure"
                    },
                    {
                        value: "culverts-channels",
                        text: "Culverts or constructed tidal channels"
                    },
                    {
                        value: "intakes",
                        text: "Intakes"
                    },
                    {
                        value: "outfalls-diffusers",
                        text: "Outfalls or diffusers"
                    },
                    {
                        value: "pipelines-ducts",
                        text: "Pipelines or ducts"
                    },
                    {
                        value: "subsea-cables",
                        text: "Subsea cables requiring protective construction"
                    },
                    {
                        divider: "Seabed-fixed structures"
                    },
                    {
                        value: "artificial-reefs",
                        text: "Artificial reefs or habitat structures"
                    },
                    {
                        value: "foundations-platforms",
                        text: "Foundations for offshore platforms or similar structures"
                    },
                    {
                        value: "piles-piled-structures",
                        text: "Piles or piled structures"
                    },
                    {
                        divider: "Other structures"
                    },
                    {
                        value: "other-structures",
                        text: "Other structures not listed above",
                        conditional: {
                            html: otherStructuresTextarea
                        }
                    }
                ],
                errorMessage: {
                    text: data['low-complexity-construction-structures-error']
                } if data['low-complexity-construction-structures-errortypeone'] == "true",
                values: data['low-complexity-construction-structures']
            }) }}
            
            <div class="govuk-button-group">
                {{ govukButton({
                    text: "Save and continue"
                }) }}
            </div>

        </form>

    </div>
</div>

<!-- ERROR LOGIC  drop down to toggle states  -->
<form method="post" action="#" class="for4" style=" float: left; position: relative; bottom:-325px; padding-bottom: 30px;  ">

	<select style="height:30px;" onchange="window.location.href='?'+this.value">

		<option value="low-complexity-construction-structures-errorthispage=false&low-complexity-construction-structures-errortypeone=false&low-complexity-construction-structures-errortypetwo=false&" {% if data['low-complexity-construction-structures-errorthispage'] != "true" %}selected{% endif %}>Errors - Off</option>

		<option value="low-complexity-construction-structures-errorthispage=true&low-complexity-construction-structures-errortypeone=true&low-complexity-construction-structures-errortypetwo=false&" {% if data['low-complexity-construction-structures-errortypeone'] == 'true' and data['low-complexity-construction-structures-errortypetwo'] != 'true' %}selected{% endif %}>Error 1 - No checkbox selected</option>

		<option value="low-complexity-construction-structures-errorthispage=true&low-complexity-construction-structures-errortypeone=false&low-complexity-construction-structures-errortypetwo=true&" {% if data['low-complexity-construction-structures-errortypeone'] != 'true' and data['low-complexity-construction-structures-errortypetwo'] == 'true' %}selected{% endif %}>Error 2 - Textarea left blank</option>

	</select>

</form>
<!--  END OF ERROR LOGIC -->

{% endblock %}

