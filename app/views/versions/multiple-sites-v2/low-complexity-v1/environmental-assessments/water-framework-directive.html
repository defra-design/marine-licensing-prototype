{% extends "../../layouts/low-complexity.html" %}

{% from "govuk/components/radios/macro.njk" import govukRadios %}
{% from "govuk/components/button/macro.njk" import govukButton %}
{% from "govuk/components/details/macro.njk" import govukDetails %}

{% block beforeContent %}
    {% include "../../includes/phase-banner.html" %}
    {% if data['user_type'] === 'organisation' %}
        {% include "../../includes/organisation-switcher.html" %}
    {% endif %}
    <a class="govuk-back-link govuk-link--no-visited-state" href="javascript:history.back()">Back</a>
{% endblock %}

<!-- Setting the big main heading at the top of the page -->
{% set pageHeadingTextHTML %}
Is your project located up to 1 nautical mile out at sea?
{% endset %}

<!-- Text that show in the browser tab. Does NOT need changing -->
{% block pageTitle %}
{% if data['errorthispage'] == "true" %}
Error:
{% endif %}

{{ pageHeadingTextHTML }} - {{ data['headerNameExemption'] }}
{% endblock %}

{% block content %}

<div class="govuk-grid-row">
	<div class="govuk-grid-column-two-thirds">
		{% if data['errorthispage'] == "true" %}
		<div class="govuk-error-summary" aria-labelledby="error-summary-title" role="alert" tabindex="-1"
			data-module="govuk-error-summary">
			<h2 class="govuk-error-summary__title" id="error-summary-title">
				There is a problem
			</h2>
			<div class="govuk-error-summary__body">
				<ul class="govuk-list govuk-error-summary__list">
					{% if data['errortypeone'] == "true" %}
					<li><a href="#low-complexity-wfd-nautical-mile">Select yes if your project is located up to 1 nautical mile out at sea</a></li>
					{% endif %}
				</ul>
			</div>
		</div>
		{% endif %}

		<!--  END OF 'error summary' -->

		<form action="water-framework-directive-router" method="post" novalidate>

			<span class="govuk-caption-l">{{ data['low-complexity-project-name-text-input'] }}</span>
			<h1 class="govuk-heading-l">{{ pageHeadingTextHTML }}</h1>

			<p class="govuk-body">Use <a href="https://magic.defra.gov.uk/MagicMap.html" class="govuk-link" rel="noreferrer noopener" target="_blank">Magic maps (opens in new tab)</a> if you need to check how far out to sea your project is in nautical miles.</p>

		{{ govukDetails({
			summaryText: "Get help with using Magic Maps",
			html: "<ol class='govuk-list govuk-list--number'>
				<li>Zoom in to the area on the map where your project is located.</li>
				<li>Select the measurement tool in the top right.</li>
				<li>Select the first ruler icon.</li>
				<li>Click on the edge of the map where you want to start measuring your location from.</li>
				<li>Then draw a line as far as you think the distance is. Double click on it to stop drawing.</li>
				<li>To convert the measurement to nautical miles, go to the unit box on the right and select nautical miles from the drop-down. You can then extend or shorten the line to check how far 1 nautical mile is.</li>
			</ol>"
		}) }}

			{{ govukRadios({
				name: "low-complexity-wfd-nautical-mile",
				id: "low-complexity-wfd-nautical-mile",
				fieldset: {
					legend: {
						text: pageHeadingTextHTML,
						classes: "govuk-visually-hidden"
					}
				},
				items: [
					{
						value: "Yes",
						text: "Yes",
						hint: {
							text: "You need to include a Water Framework Directive assessment as part of your marine licence application"
						},
						checked: data['low-complexity-wfd-nautical-mile'] == "Yes"
					},
					{
						value: "No",
						text: "No",
						checked: data['low-complexity-wfd-nautical-mile'] == "No"
					}
				],
				errorMessage: {
					text: "Select yes if your project is located up to 1 nautical mile out at sea"
				} if data['errortypeone'] == "true"
			}) }}

			<div class="govuk-button-group">
				{{ govukButton({
					text: "Continue"
				}) }}

				<a class="govuk-link" href="javascript:history.back()">Cancel</a>
			</div>

		</form>

	</div>
</div>

<!-- ERROR LOGIC  drop down to toggle states  -->
<form method="post" action="#" class="for4" style=" float: left; position: relative; bottom:-325px; padding-bottom: 30px;  ">

	<select style="height:30px;" onchange="window.location.href='?'+this.value">

		<option
			value="errorthispage=false&errortypeone=false&errortypetwo=false&errortypethree=false&errortypefour=false&errortypefive=false&errortypesix=false&"
			{% if data['errorthispage'] !="true" %}selected{% endif %}>Errors - Off</option>

		<option
			value="errorthispage=true&errortypeone=true&errortypetwo=false&errortypethree=false&errortypefour=false&errortypefive=false&errortypesix=false&"
			{% if data['errortypeone']=='true' and data['errortypetwo'] !='true' and data['errortypethree'] !='true' and
			data['errortypefour'] !='true' and data['errortypefive'] !='true' and data['errortypesix'] !='true'
			%}selected{% endif %}>Error 1 - No radio selected</option>

	</select>

</form>
<!--  END OF ERROR LOGIC -->

{% endblock %}

