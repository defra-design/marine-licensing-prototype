{% extends "../layouts/exemption.html" %}

{% from "govuk/components/button/macro.njk" import govukButton %}

{% block beforeContent %}
    {% include "../includes/phase-banner.html" %}
    {% include "../includes/back-link.html" %}
{% endblock %}

{% set pageHeadingTextHTML %}
Are you sure you want to cancel without saving?
{% endset %}

{% block content %}

<div class="govuk-grid-row">

  <div class="govuk-grid-column-two-thirds">
    <span class="govuk-caption-l">{{ data['exemption-project-name-text-input'] }}</span>
    <h1 class="govuk-heading-l">
      {{ pageHeadingTextHTML }}
    </h1>

    <p class="govuk-inset-text">
      Cancelling now means you'll lose any unsaved site details. This cannot be undone.
    </p>
 
    <form action="cancel-confirmed" method="post" novalidate>
      <div class="govuk-button-group govuk-!-margin-top-7">
        {{ govukButton({
          text: "Yes, cancel without saving",
          classes: "govuk-button--warning"
        }) }}
        {% if data['cancelOrigin'] == 'check-answers' %}
          <a class="govuk-link govuk-link--no-visited-state" href="check-answers-multiple-sites">Go back to 'Check answers'</a>
        {% else %}
          {% set currentBatch = null %}
          {% if data['currentBatchId'] and data['siteBatches'] %}
            {% for batch in data['siteBatches'] %}
              {% if batch.id == data['currentBatchId'] %}
                {% set currentBatch = batch %}
              {% endif %}
            {% endfor %}
          {% endif %}
          {% if currentBatch and currentBatch.entryMethod == 'manual-entry' %}
            <a class="govuk-link govuk-link--no-visited-state" href="manual-entry/review-site-details">Go back to 'Review site details'</a>
          {% else %}
            <a class="govuk-link govuk-link--no-visited-state" href="review-site-details">Go back to 'Review site details'</a>
          {% endif %}
        {% endif %}
    </div>
    </form>
  </div>
</div>

{% endblock %}

<!-- Generated by Copilot --> 