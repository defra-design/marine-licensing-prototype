//
// For guidance on how to add CSS and SCSS see:
// https://prototype-kit.service.gov.uk/docs/adding-css-javascript-and-images
// 

// Add extra styles here

// Accessible Autocomplete GOV.UK styling overrides
.autocomplete__wrapper {
  position: relative;
  
  .autocomplete__input {
    font-family: "GDS Transport", arial, sans-serif;
    font-size: 19px;
    line-height: 1.25;
    border: 2px solid #0b0c0c !important; // Single GOV.UK border
    box-sizing: border-box;
    padding-right: 50px !important; // Make room for arrow
    
    &:focus {
      border-color: #fd0 !important; // GOV.UK focus color
      outline: 3px solid #fd0 !important;
      outline-offset: 0 !important;
      box-shadow: inset 0 0 0 2px !important;
    }
    
    @media (max-width: 40.0525em) {
      font-size: 16px;
    }
  }
  
  // Fix the built-in dropdown arrow that's not showing
  .autocomplete__dropdown-arrow-down {
    display: block !important;
    position: absolute !important;
    right: 15px !important;
    top: 16px !important; // Precisely positioned for center
    transform: none !important;
    width: 0 !important;
    height: 0 !important;
    border-left: 8px solid transparent !important;
    border-right: 8px solid transparent !important;
    border-top: 8px solid #0b0c0c !important;
    border-bottom: none !important;
    pointer-events: none !important;
    z-index: 10 !important;
    margin: 0 !important;
    
    // Hide any default content
    svg, span, &::before, &::after {
      display: none !important;
    }
  }
  
  .autocomplete__menu {
    font-family: "GDS Transport", arial, sans-serif;
    border: 2px solid #0b0c0c;
    border-top: 0;
    
    .autocomplete__option {
      font-size: 19px;
      line-height: 1.25;
      padding: 10px 15px;
      
      @media (max-width: 40.0525em) {
        font-size: 16px;
      }
      
      &:hover,
      &:focus,
      &[aria-selected="true"] {
        background-color: #1d70b8;
        color: #ffffff;
      }
    }
  }
  
  .autocomplete__hint {
    font-family: "GDS Transport", arial, sans-serif;
    font-size: 19px;
    line-height: 1.25;
    
    @media (max-width: 40.0525em) {
      font-size: 16px;
    }
  }
}

.govuk-border {
  border: 5px solid #b1b4b6;  // govuk-colour("mid-grey")
}

.hmrc-account-menu {
    border-bottom: 4px solid #1D70B8;

}

.hmrc-account-menu.version2 {
  border-bottom: 1px solid #b1b4b6;

}


// Page-specific width for home page only
.page-home {
  .govuk-width-container,
  .govuk-header__container,
  .govuk-footer__container,
  .govuk-footer__meta,
  .moj-width-container {
    max-width: 1280px;
  }
  
  .govuk-service-navigation__nav {
    max-width: 1280px;
    margin: 0 auto;
  }
}

.hmrc-account-menu__link, .hmrc-account-menu__link:visited {
  text-decoration: underline;
	color: #1D70B8}

.hmrc-account-menu__link:hover {
  border-bottom: none;
  color: #1D70B8;
}


@media (max-width: 50.0525em) {
	.is-smaller.hmrc-account-menu {
		border-bottom: 1px solid #b1b4b6;
		text-decoration: underline;
		color: #1D70B8;
	}
	.hmrc-account-menu__link {
		text-decoration: underline;
		color: #1D70B8;
		padding:8px 16px}
}


/////// Start of multiple coordinates styles ///////
///
/// 
/// 
///
/// 
@media (max-width: 40.0525em) {
  
  .multiple-coordinates .govuk-label.govuk-visually-hidden {
    position: static !important;
    width: auto !important;
    height: auto !important;
    margin: 0 0 5px 0 !important;
    overflow: visible !important;
    clip: auto !important;
    -webkit-clip-path: none !important;
    clip-path: none !important;
    white-space: normal !important;
    border: 0 !important;
    font-size: 16px !important;
    font-weight: normal !important;
    display: block !important;
  }
  

}


@media (max-width: 40.0525em) {
	/* Existing styles for labels remain */
	
	/* Hide the summary headers on mobile */
	.multiple-coordinates .summary-header {
	  display: none;
	}
	
	/* Hide the first row completely on mobile as it only contains headers */
	.multiple-coordinates .govuk-summary-list__row:first-child {
	  display: none;
	}
	
	/* Make the point name more prominent on mobile */
	.multiple-coordinates .govuk-summary-list__key {
	  font-weight: bold !important;
	  margin-bottom: 15px;
	  padding-top: 15px;
	}
  }

  @media (max-width: 50em) {
	.multiple-coordinates-column.govuk-grid-column-three-quarters {
	  width: 100% !important;
	}
  }

@media (max-width: 40.0525em) {
	.map-help-desktop {
	  display: none;
	}
}
@media (min-width: 40.0526em) {
	.map-help-mobile {
	  display: none;
	}
}
.coordinate-row-error {
	border-left: 5px solid #d4351c;
  }

.coordinate-row-error .govuk-summary-list__key {
	padding-left: 15px;
  }
  
  @media (max-width: 40.0525em) {
	.coordinate-row-error .govuk-summary-list__value {
		padding-left: 15px;
	  }
}
  
@media (max-width: 40.0525em) { /* Or use 40.0625em */

    /* --- Target the remove button ONLY within multi-coords fieldsets --- */
    .multi-coords a.govuk-button.govuk-button--secondary.remove-button {
        width: auto !important;
        /* Explicitly remove float for mobile if needed later */
        /* float: none !important; */
        margin-top: 0;
        /* margin-bottom: 0; is already set by utility class */
    }

    /* --- Adjustments for the Legend ONLY within multi-coords fieldsets --- */
    .multi-coords legend.govuk-fieldset__legend.govuk-fieldset__legend--s {
        /* === Spacing === */
        margin-top: 30px; /* Adjust value (e.g., govuk-spacing(6)) */
        margin-bottom: 0 !important; /* Adjust value (e.g., govuk-spacing(4)) */

        /* === Vertical Alignment Attempt (using padding) === */
        padding-top: 4px !important;
        padding-bottom: 4px !important;

        /* === Overriding Floats & Using Flexbox === */
        float: none !important; /* Disable float: left */
        width: 100% !important; /* Override potential inline width */
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    /* --- Adjustments for the Button INSIDE the multi-coords Legend --- */
    .multi-coords legend.govuk-fieldset__legend a.remove-button {
        float: none !important; /* Disable float: right */
    }

    /* --- Adjustments for the Form Group AFTER the multi-coords Legend --- */
    /* Target the form group immediately following the legend inside .multi-coords */
    .multi-coords legend.govuk-fieldset__legend + .govuk-form-group {
        clear: none !important; /* Disable clear: both */
        /* margin-top: 0 !important; */ /* Optional reset */
    }

    /* --- Ensure Inputs are Full Width ONLY within multi-coords fieldsets --- */
    /* Override half-width utility for inputs inside .multi-coords */
    .multi-coords .govuk-input.govuk-\!-width-one-half {
        width: 100% !important;
    }
}

/////// End of multiple coordinates styles ///////

@media (min-width: 48em) {
  .site-batch-actions {
    padding-top: 4px !important;
  }
}

// Responsive styles for site batch headers
@media (max-width: 48em) {
  .site-batch-header {
    .site-batch-heading {
      float: none !important;
    }
    
    .site-batch-actions {
      float: none !important;
      margin: 15px 0 !important;
    }
  }
}

@media (max-width: 40.0525em) {
  .site-batch-header {
    .site-batch-header-content {
      float: none !important;
      overflow: visible !important;
    }
    
    .site-batch-heading {
      float: none !important;
      margin-bottom: 15px !important;
    }
    
    .site-batch-actions {
      float: none !important;
      margin-bottom: 20px !important; // govuk-spacing(7) for spacing after links
    }
  }
}

.govuk-summary-list__actions-list-item:not(:first-child), .govuk-summary-card__action:not(:first-child) {
  border-left: none;
}

// Page-specific overrides
.page-home, .page-sample-plans-projects, .page-low-complexity-projects {
  .govuk-width-container,
  .govuk-header__container,
  .govuk-header__navigation {
    max-width: 1280px;
    margin-left: auto;
    margin-right: auto;
    padding-left: 15px;
    padding-right: 15px;
    
    @media (min-width: 40.0625em) {
      padding-left: 30px;
      padding-right: 30px;
    }
  }
  
  // Footer special handling - allow container to be full width, constrain the meta content
  .govuk-footer__container {
    max-width: none !important;
    padding: 0 !important;
  }
  
  .govuk-footer__meta {
    max-width: 1280px !important;
    margin-left: auto;
    margin-right: auto;
    padding-left: 0 !important;
    padding-right: 0 !important;
  }
  
  .govuk-footer__meta-item {
    margin: 0 !important;
  }
  
  // Override other widths specifically for home page
  .moj-width-container {
    max-width: 1360px;
    padding-left: 15px;
    padding-right: 15px;
    
    @media (min-width: 40.0625em) {
      padding-left: 30px;
      padding-right: 30px;
    }
  }
  
  // Ensure service navigation is also full-width with proper padding
  .govuk-service-navigation__nav {
    max-width: 1280px;
    margin-left: auto;
    margin-right: auto;
    padding-left: 15px;
    padding-right: 15px;
    
    @media (min-width: 40.0625em) {
      padding-left: 30px;
      padding-right: 30px;
    }
  }
}

// Generated by Copilot
// Full-width styling for cookie banner page
.page-cookie-banner {
  // Set white background for the entire page
  background-color: white;
  
  .govuk-width-container,
  .govuk-header__container,
  .govuk-header__navigation,
  .govuk-footer__container,
  .govuk-footer__meta {
    max-width: 100%;
  }
  
  // Override other widths specifically for cookie banner page
  .moj-width-container {
    max-width: 100%;
  }
  
  // Ensure service navigation is also full-width
  .govuk-service-navigation__nav {
    max-width: 100%;
  }
  
  // Center the cookie banner content within the main content area
  .govuk-main-wrapper {
    padding-top: 0 !important;
    
    .govuk-width-container {
      max-width: 960px;
      margin: 0 auto;
    }
  }
}

// Ensure white background for cookie banner page at html level
html:has(.page-cookie-banner),
body.page-cookie-banner {
  background-color: white !important;
}

/* Organisation Switcher Component
------------------------------------------------------------------- */

.app-organisation-switcher {
  /* Create the full-width bottom border */
  border-bottom: 1px solid #b1b4b6; /* govuk-colour("border") */
}

/* By default, on mobile, the link appears below the name.
   Typography is now handled by GOV.UK utility classes in the HTML. */

.app-organisation-switcher__name {
     display: block; 
     margin-top: 10px;
     margin-bottom: 0;
   }

.app-organisation-switcher__link {
  display: block; 
  margin-bottom: 12px;
}

/* Add space between the name and the link */
.app-organisation-switcher__link {
  margin-left: 0; 
  margin-top: 5px;
}

/* At the specified breakpoint (e.g., tablet and wider) */
@media (min-width: 40.0525em) {
  /* Display the name and link on the same line */
  .app-organisation-switcher__name,
  .app-organisation-switcher__link {
    display: inline-block;
    vertical-align: baseline;
    margin-bottom: 12px;
  }
  
  /* Add space between the name and the link */
  .app-organisation-switcher__link {
    margin-left: 6px;
  }
}
/* Align the nav to the righ
.govuk-service-navigation__list {
  justify-content: flex-end;
} 
*/

// Page header with button component
.page-header-with-button {
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-wrap: wrap;
  gap: 20px; // govuk-spacing(4)
}

.page-header-title {
  margin-bottom: 0 !important; // Remove default heading margin
}

.page-header-text-container {
  flex: 1;
}

.page-header-button {
  margin-bottom: 0 !important; // Remove default button margin
  flex-shrink: 0;
}

.page-header-buttons {
  display: flex;
  gap: 15px; // govuk-spacing(3)
  flex-shrink: 0;
}

// Mobile responsive behavior
@media (max-width: 40.0525em) {
  .page-header-with-button {
    flex-direction: column;
    align-items: flex-start;
    gap: 15px; // govuk-spacing(3) for mobile
  }
  
  .page-header-title {
    margin-bottom: 0 !important;
  }
  
  .page-header-button {
    align-self: stretch; // Full width on mobile
    text-align: center;
  }
  
  .page-header-buttons {
    flex-direction: column;
    width: 100%;
    gap: 10px; // govuk-spacing(2) for mobile
  }
}

// Map view
.map-label {
  vertical-align: top;
}

// Make the map value column wider by overriding the grid template
.govuk-summary-list__row:has(.map-label) {
  grid-template-columns: 1fr 2.5fr auto !important; // Make middle column much wider
}

// Alternative approach for browsers that don't support :has()
.govuk-summary-list__row .govuk-summary-list__key.map-label + .govuk-summary-list__value {
  width: auto !important;
  max-width: none !important;
  flex: 2.5 !important;
}

// Ensure map images are responsive and fill their container.
.govuk-summary-list__value img[alt*="Map showing"] {
  width: 100%;
  height: auto;
  display: block;
}


.moj-action-bar__filter::after {
  content: "";
  position: absolute;
  top: 0;
  right: 0;
  width: 2px;
  height: 40px;
  background-color: #fff;
}


// MOJ Filter component – ensure the remove "×" icon uses our served path
// The prototype serves assets from /public, so override the default background-image
.moj-filter__tag:after {
  background-image: url('/public/images/icon-tag-remove-cross.svg') !important;
  width: 10px;  // keep same dimensions as MOJ default
  height: 10px; // keep same dimensions as MOJ default
}

// IAT-LCML project outcome: activity summary – two equal columns (full width of list)
.iat-activity-summary.govuk-summary-list {
  .govuk-summary-list__row {
    align-items: flex-start;
  }
  .govuk-summary-list__key,
  .govuk-summary-list__value {
    vertical-align: top;
    padding-top: 16px;
    padding-bottom: 0; // Tighter row spacing (default is typically 15px)
  }
  @media (min-width: 40.0625em) {
    .govuk-summary-list__key {
      width: 50%;
    }
    .govuk-summary-list__value {
      width: 50%;
    }
  }
}

// Summary list full width override - use flex for all rows


@media (min-width: 40.0625em) {

  .govuk-summary-list--full-width {
    // Apply flex layout to ALL rows
    .govuk-summary-list__row {
      display: flex !important;
      max-width: none !important;
    }

    .govuk-summary-list__key {
      flex: 0 0 30%;
      padding-right: 20px;
      margin-right: 0;
    }

    .govuk-summary-list__value {
      flex: 1 1 auto;
      padding-right: 20px;
      margin-right: 0;
    }

    .govuk-summary-list__actions {
      flex: 0 0 auto;
      text-align: right;
      padding-left: 20px;
      margin-left: 0;
    }

    // For map rows with full-width value, keep the same proportions
    .govuk-summary-list__row:has(.govuk-summary-list__value--full-width) {
      .govuk-summary-list__key {
        flex: 0 0 30%;
      }
      
      .govuk-summary-list__value {
        flex: 1 1 auto;
        padding-right: 0;
      }
    }

    // Remove the pseudo-element that creates extra spacing on rows with no actions
    .govuk-summary-list__row--no-actions::after {
      content: none;
    }
  }
}

// Homepage tile cards component
.homepage-tile-card {
  display: block;
  background-color: #f3f2f1;
  padding: 20px;
  min-height: 155px;
  margin-bottom: 30px; // govuk-spacing(6)
  text-decoration: none;
  color: inherit;
  transition: background-color 0.2s ease;
  
  &:hover {
    background-color: #1d70b8; // GOV.UK blue
    
    .homepage-tile-card__heading {
      color: #ffffff;
      text-decoration: underline;
    }
    
    .homepage-tile-card__description {
      color: #ffffff;
    }
  }
  
  &:focus {
    outline: 3px solid #fd0; // GOV.UK focus color
    outline-offset: 0;
    background-color: #1d70b8; // GOV.UK blue
    
    .homepage-tile-card__heading,
    .homepage-tile-card__description {
      color: #ffffff;
    }
  }
}

.homepage-tile-card__heading {
  margin-bottom: 15px; // govuk-spacing(3)
  color: #1d70b8; // GOV.UK blue for links
  text-decoration: underline;
  text-decoration-thickness: 2px;
  text-underline-offset: 2px;
}

.homepage-tile-card__description {
  margin-bottom: 0;
  color: #0b0c0c; // GOV.UK text color
}

// Mobile responsive behavior for homepage tiles
@media (max-width: 40.0525em) {
  .homepage-tile-card {
    min-height: 50px; // Shorter on mobile
    padding: 15px;
    margin-bottom: 20px; // govuk-spacing(4)
  }
}

// Responsive grid overrides for homepage tiles
@media (max-width: 64em) { // 1024px
  // Override GOV.UK's one-third columns to be one-half at this width
  .govuk-grid-row .govuk-grid-column-one-third {
    width: 50%;
    float: left;
  }
  
  // Clear every 2nd card to start a new row (for 2-column layout)
  .govuk-grid-row .govuk-grid-column-one-third:nth-child(2n+1) {
    clear: left;
  }
  
  // Remove clear from every 3rd (which was for 3-column layout)
  .govuk-grid-row .govuk-grid-column-one-third:nth-child(3n+1) {
    clear: none;
  }
}

@media (max-width: 40.0625em) { // 640px - matching GOV.UK mobile breakpoint
  // Override GOV.UK's columns to be full width at mobile
  .govuk-grid-row .govuk-grid-column-one-third {
    width: 100%;
    float: none;
  }
}

/* ============================================================
   Project Filter Panel - Desktop Layout
   ============================================================ */

/* Desktop layout (above 640px) - inline radios with compact conditional reveal */
@media (min-width: 40.0625em) { // 641px and above
  
  /* Prevent radio labels from wrapping */
  .project-filter-radios .govuk-radios__label {
    white-space: nowrap;
  }
 /* Remove conditional reveal border and spacing for inline radios */
 .project-filter-radios .govuk-radios__conditional {
  border-left: none !important;
  padding-left: 0 !important;
  margin-left: 0 !important;
  margin-bottom: 0 !important;
  padding-bottom: 0 !important;
}


}



/* Intermediate layout (below 1060px) - wrap button underneath */
@media (max-width: 66.25em) { // Below 1060px
  
  /* Force button to wrap to next line */
  .project-filter-button-wrapper {
    flex-basis: 100% !important;
    width: 100% !important;

  }
}

/* Mobile layout (below 640px) - stack button underneath at full width */
@media (max-width: 48em) { // Below 768px to ensure 640px is included
  
  /* Override flex container to stack vertically on mobile */
  .project-filter-container {
    display: block !important;
  }
  
  /* Radio wrapper takes full width */
  .project-filter-radios-wrapper {
    width: 100% !important;
    margin-bottom: 20px !important;
  }
  

  

}
